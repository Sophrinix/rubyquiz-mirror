<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>


<!-- Start Wayback Rewrite JS Include -->
<script type="text/javascript" src="/static/js/jwplayer/jwplayer.js" ></script>
<script type="text/javascript" src="/static/js/video-embed-rewriter.js"></script>
<script type="text/javascript">
function initYTVideo(id)
{
	_wmVideos_.init("/web/", id);
}
</script>
<!-- End Wayback Rewrite JS Include -->

	<title>Ruby Quiz - Paper Rock Scissors (#16)</title>
	<link rel="stylesheet" type="text/css" href="/web/20120121190251cs_/http://rubyquiz.com/quiz.css" />
	<link rel="stylesheet" type="text/css" href="/web/20120121190251cs_/http://rubyquiz.com/print.css" media="print" />
</head><body>
<!-- BEGIN WAYBACK TOOLBAR INSERT -->

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/rubyquiz.com\/quiz16.html";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "21";
var displayMonth = "Jan";
var displayYear = "2012";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px; z-index:9000;">
<div id="wm-ipp-inside" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://rubyquiz.com/quiz16.html" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20120121190251" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20110826105954/http://rubyquiz.com/quiz16.html" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="26 Aug 2011"><strong>AUG</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 19:02:51 Jan 21, 2012">JAN</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20120418061700/http://www.rubyquiz.com/quiz16.html" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="18 Apr 2012"><strong>APR</strong></a>
		                
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20110826105954/http://rubyquiz.com/quiz16.html" title="10:59:54 Aug 26, 2011" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 19:02:51 Jan 21, 2012">21</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20120418061700/http://www.rubyquiz.com/quiz16.html" title="6:17:00 Apr 18, 2012" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0"/></a>
		                
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20101127174138/http://rubyquiz.com/quiz16.html" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="27 Nov 2010"><strong>2010</strong></a>
		                
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 19:02:51 Jan 21, 2012">2012</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20130215052836/http://rubyquiz.com/quiz16.html" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="15 Feb 2013"><strong>2013</strong></a>
		                
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20120121190251*/http://rubyquiz.com/quiz16.html" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>35 captures</strong></a>
           <div style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">12 Apr 06 - 15 Feb 13</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000200000100_2007:-1:000101100000_2008:-1:000020000000_2009:-1:000000000000_2010:-1:000000000010_2011:-1:000000010000_2012:0:1001b000a100_2013:-1:010000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

	<div id="page">
		<div id="header"><span class="ruby">Ruby</span> <span class="quiz">Quiz</span></div>
		<div id="content">
			<span class="title">Paper Rock Scissors (#16)</span>
			<p>Alright generals, break out you copies of "The Art of War" and let's get a little competition going!</p>
			<p>Your task is to build a strategy for playing the game of Paper Rock Scissors against all manner of opponents.  The question here is if you can adapt to an opponent's strategy and seize the advantage, while he is doing the same to you of course.</p>
			<p>If you're not familiar with this childhood game, it's very simple.  Both players choose one of three items at the same time:  Paper, a Rock, or Scissors.  A "winner" is chosen by the following rules:</p>
			<p class="example">Paper covers a Rock.      (Paper beats a Rock.)<br />Scissors cut Paper.       (Scissors beat Paper.)<br />A Rock smashes Scissors.  (A Rock beats Scissors.)<br />Anything else is a "draw".</p>
			<p>Defining a player for straight forward.  I'm providing a class you can just inherit from:</p>
			<div class="code"><span class="type">ruby</span><div class="body">    <span class="keyword">class</span> YourPlayer &lt; Player<br />        <span class="keyword">def</span> initialize( opponent )<br />            <span class="comment"># optional</span><br />            <span class="comment">#</span><br />            <span class="comment"># called at the start of a match verses opponent</span><br />            <span class="comment"># opponent = String of opponent's class name</span><br />            <span class="comment">#</span><br />            <span class="comment"># Player's constructor sets @opponent</span><br />        <span class="keyword">end</span><br /><br />        <span class="keyword">def</span> choose<br />            <span class="comment"># required</span><br />            <span class="comment">#</span><br />            <span class="comment"># return your choice of :paper, :rock or :scissors</span><br />        <span class="keyword">end</span><br /><br />        <span class="keyword">def</span> result( you, them, win_lose_or_draw )<br />            <span class="comment"># optional</span><br />            <span class="comment">#</span><br />            <span class="comment"># called after each choice you make to give feedback</span><br />            <span class="comment"># you              = your choice</span><br />            <span class="comment"># them             = opponent's choice</span><br />            <span class="comment"># win_lose_or_draw = :win, :lose or :draw, your result</span><br />        <span class="keyword">end</span><br />    <span class="keyword">end</span><br /><br /></div></div>
			<p>We'll need some rules for defining players, to make it easy for all our strategies to play against each other:</p>
			<p class="example">* send in one file for each strategy<br />* a file should contain exactly one subclass of Player<br />* start the name of your subclass with your initials<br />* start the name of your files with your initials<br />* start any data files you write to disk with your initials</p>
			<p>Those rules should help with testing how different algorithms perform against each other.</p>
			<p>Here are two dumb Players to practice with:</p>
			<div class="code"><span class="type">ruby</span><div class="body">    <span class="keyword">class</span> JEGPaperPlayer &lt; Player<br />        <span class="keyword">def</span> choose<br />            :paper<br />        <span class="keyword">end</span><br />    <span class="keyword">end</span><br /><br /></div></div>
			<div class="code"><span class="type">ruby</span><div class="body">    <span class="keyword">class</span> JEGQueuePlayer &lt; Player<br />        QUEUE = [ :rock,<br />                  :scissors,<br />                  :scissors ]<br /><br />        <span class="keyword">def</span> initialize( opponent )<br />            <span class="keyword">super</span><br /><br />            <span class="variable">@index</span> = 0<br />        <span class="keyword">end</span><br /><br />        <span class="keyword">def</span> choose<br />            choice = QUEUE[<span class="variable">@index</span>]<br /><br />            <span class="variable">@index</span> += 1<br />            <span class="variable">@index</span> = 0 <span class="keyword">if</span> <span class="variable">@index</span> == QUEUE.size<br /><br />            choice<br />        <span class="keyword">end</span><br />    <span class="keyword">end</span><br /><br /></div></div>
			<p>Here's how those two do against each other in a 1,000 game match:</p>
			<p class="example">JEGPaperPlayer vs. JEGQueuePlayer
        JEGPaperPlayer: 334
        JEGQueuePlayer: 666
        JEGQueuePlayer Wins</p>
			<p>Finally, here's the game engine that supports the players:</p>
			<div class="code"><span class="type">ruby</span><div class="body">    <span class="comment">#!/usr/bin/env ruby</span><br /><br />    <span class="keyword">class</span> Player<br />        <span class="variable">@@players</span> = [ ]<br /><br />        <span class="keyword">def</span> <span class="keyword">self</span>.inherited( player )<br />            <span class="variable">@@players</span> &lt;&lt; player<br />        <span class="keyword">end</span><br /><br />        <span class="keyword">def</span> <span class="keyword">self</span>.each_pair<br />            (0...(<span class="variable">@@players</span>.size - 1)).each <span class="keyword">do</span> |i|<br />                ((i + 1)...<span class="variable">@@players</span>.size).each <span class="keyword">do</span> |j|<br />                    <span class="keyword">yield</span> <span class="variable">@@players</span>[i], <span class="variable">@@players</span>[j]<br />                <span class="keyword">end</span><br />            <span class="keyword">end</span><br />        <span class="keyword">end</span><br /><br />        <span class="keyword">def</span> initialize( opponent )<br />            <span class="variable">@opponent</span> = opponent<br />        <span class="keyword">end</span><br /><br />        <span class="keyword">def</span> choose<br />            raise NoMethodError, <span class="string">"Player subclasses must override choose()."</span><br />        <span class="keyword">end</span><br /><br />        <span class="keyword">def</span> result( you, them, win_lose_or_draw )<br />            <span class="comment"># do nothing--sublcasses can override as needed</span><br />        <span class="keyword">end</span><br />    <span class="keyword">end</span><br /><br />    <span class="keyword">class</span> Game<br />        <span class="keyword">def</span> initialize( player1, player2 )<br />            <span class="variable">@player1</span>    = player1.new(player2.to_s)<br />            <span class="variable">@player2</span>    = player2.new(player1.to_s)<br />            <span class="variable">@score1</span>        = 0<br />            <span class="variable">@score2</span>        = 0<br />        <span class="keyword">end</span><br /><br />        <span class="keyword">def</span> play( match )<br />            match.times <span class="keyword">do</span><br />                hand1 = <span class="variable">@player1</span>.choose<br />                hand2 = <span class="variable">@player2</span>.choose<br />                <span class="keyword">case</span> hand1<br />                <span class="keyword">when</span> :paper<br />                    <span class="keyword">case</span> hand2<br />                    <span class="keyword">when</span> :paper<br />                        draw hand1, hand2<br />                    <span class="keyword">when</span> :rock<br />                        win <span class="variable">@player1</span>, hand1, hand2<br />                    <span class="keyword">when</span> :scissors<br />                        win <span class="variable">@player2</span>, hand1, hand2<br />                    <span class="keyword">else</span><br />                        raise <span class="string">"Invalid choice by #{@player2.class}."</span><br />                    <span class="keyword">end</span><br />                <span class="keyword">when</span> :rock<br />                    <span class="keyword">case</span> hand2<br />                    <span class="keyword">when</span> :paper<br />                        win <span class="variable">@player2</span>, hand1, hand2<br />                    <span class="keyword">when</span> :rock<br />                        draw hand1, hand2<br />                    <span class="keyword">when</span> :scissors<br />                        win <span class="variable">@player1</span>, hand1, hand2<br />                    <span class="keyword">else</span><br />                        raise <span class="string">"Invalid choice by #{@player2.class}."</span><br />                    <span class="keyword">end</span><br />                <span class="keyword">when</span> :scissors<br />                    <span class="keyword">case</span> hand2<br />                    <span class="keyword">when</span> :paper<br />                        win <span class="variable">@player1</span>, hand1, hand2<br />                    <span class="keyword">when</span> :rock<br />                        win <span class="variable">@player2</span>, hand1, hand2<br />                    <span class="keyword">when</span> :scissors<br />                        draw hand1, hand2<br />                    <span class="keyword">else</span><br />                        raise <span class="string">"Invalid choice by #{@player2.class}."</span><br />                    <span class="keyword">end</span><br />                <span class="keyword">else</span><br />                    raise <span class="string">"Invalid choice by #{@player1.class}."</span><br />                <span class="keyword">end</span><br />            <span class="keyword">end</span><br />        <span class="keyword">end</span><br /><br />        <span class="keyword">def</span> results<br />            match = <span class="string">"#{@player1.class} vs. #{@player2.class}\n"</span> +<br />                        <span class="string">"\t#{@player1.class}: #{@score1}\n"</span> +<br />                        <span class="string">"\t#{@player2.class}: #{@score2}\n"</span><br />            <span class="keyword">if</span> <span class="variable">@score1</span> == <span class="variable">@score2</span><br />                match + <span class="string">"\tDraw\n"</span><br />            <span class="keyword">elsif</span> <span class="variable">@score1</span> &gt; <span class="variable">@score2</span><br />                match + <span class="string">"\t#{@player1.class} Wins\n"</span><br />            <span class="keyword">else</span><br />                match + <span class="string">"\t#{@player2.class} Wins\n"</span><br />            <span class="keyword">end</span><br />        <span class="keyword">end</span><br /><br />        private<br /><br />        <span class="keyword">def</span> draw( hand1, hand2 )<br />            <span class="variable">@score1</span> += 0.5<br />            <span class="variable">@score2</span> += 0.5<br />            <span class="variable">@player1</span>.result(hand1, hand2, :draw)<br />            <span class="variable">@player2</span>.result(hand2, hand1, :draw)<br />        <span class="keyword">end</span><br /><br />        <span class="keyword">def</span> win( winner, hand1, hand2 )<br />            <span class="keyword">if</span> winner == <span class="variable">@player1</span><br />                <span class="variable">@score1</span> += 1<br />                <span class="variable">@player1</span>.result(hand1, hand2, :win)<br />                <span class="variable">@player2</span>.result(hand2, hand1, :lose)<br />            <span class="keyword">else</span><br />                <span class="variable">@score2</span> += 1<br />                <span class="variable">@player1</span>.result(hand1, hand2, :lose)<br />                <span class="variable">@player2</span>.result(hand2, hand1, :win)<br />            <span class="keyword">end</span><br />        <span class="keyword">end</span><br />    <span class="keyword">end</span><br /><br />    match_game_count = 1000<br />    <span class="keyword">if</span> ARGV.size &gt; 2 <span class="keyword">and</span> ARGV[0] == <span class="string">"-m"</span> <span class="keyword">and</span> ARGV[1] =~ <span class="string">/^[1-9]\d*$/</span><br />        ARGV.shift<br />        match_game_count = ARGV.shift.to_i<br />    <span class="keyword">end</span><br /><br />    ARGV.each <span class="keyword">do</span> |p|<br />        <span class="keyword">if</span> test(?d, p)<br />            Dir.foreach(p) <span class="keyword">do</span> |file|<br />                <span class="keyword">next</span> <span class="keyword">if</span> file =~ <span class="string">/^\./</span><br />                <span class="keyword">next</span> <span class="keyword">unless</span> file =~ <span class="string">/\.rb$/</span><br />                require File.join(p, file)<br />            <span class="keyword">end</span><br />        <span class="keyword">else</span><br />            require p<br />        <span class="keyword">end</span><br />    <span class="keyword">end</span><br /><br />    Player.each_pair <span class="keyword">do</span> |one, two|<br />        game = Game.new one, two<br />        game.play match_game_count<br />        puts game.results<br />    <span class="keyword">end</span><br /><br /></div></div>
			<p>To use:</p>
			<p class="example">paper_rock_scissors.rb jeg_paper_player.rb jeg_queue_player.rb</p>
			<p>Or you can point it at a directory and it will treat all the ".rb" files in there as Players:</p>
			<p class="example">paper_rock_scissors.rb players/</p>
			<p>You can also change the match game count:</p>
			<p class="example">paper_rock_scissors.rb -m 10000 players/</p>
			<hr />
			<p><span class="title">Quiz Summary</span></p>
			<p>This week's quiz is a classic computer science problem in disguise.  It's generally done with the Prisoner's Dilemma:</p>
			<p><a href="/web/20120121190251/http://plato.stanford.edu/entries/prisoner-dilemma/">Prisoner's Dilemma</a></p>
			<p>The game chosen doesn't much matter, but the idea is that there really shouldn't be much strategy involved.  In the Prisoner's Dilemma, it's generally agreed that it's hard to beat a player that confesses every time.  For the game of Paper Rock Scissors, the winning strategy is to be purely random, as Benedikt Huber explained on Ruby Talk:</p>
			<p class="example">You can't give any predictions on the next move of a random player.<br />Therefore you have a 1/3 prop. to choose a winning, losing<br />or drawing move.</p>
			<p>To be fair, Paper Rock Scissors does have quite a bit of strategy theory these days, but the conditions of that theory (mostly body language) are unavailable to computer players.  Entire books have been written on the subject, believe it or not:</p>
			<p><a href="/web/20120121190251/http://www.worldrps.com/">The Official Rock Paper Scissors Strategy Guide</a></p>
			<p>So random is the best we can do?  Is that hard to build?  Uh, no.  Here's a sample by Avi Bryant:</p>
			<div class="code"><span class="type">ruby</span><div class="body">    <span class="keyword">class</span> AJBRandomPlayer &lt; Player<br />        <span class="keyword">def</span> choose<br />             [:paper, :scissors, :rock][rand(3)]<br />        <span class="keyword">end</span><br />    <span class="keyword">end</span><br /><br /></div></div>
			<p>If we test that, we get the expected 50/50 results:</p>
			<p class="example">AJBRandomPlayer vs. JEGPaperPlayer<br />		AJBRandomPlayer: 511.0<br />		JEGPaperPlayer: 489.0<br />		AJBRandomPlayer Wins<br />AJBRandomPlayer vs. JEGQueuePlayer<br />		AJBRandomPlayer: 499.5<br />		JEGQueuePlayer: 500.5<br />		JEGQueuePlayer Wins</p>
			<p>Of course, that's so uninteresting, we're probably beginning to wonder if James's quiz selecting skills are on the fritz.  Possibly, but interesting solutions make me look good none-the-less.  This week, Christian Neukirchen sent in more than one of those:</p>
			<p class="example">CNBiasInverter: Choose so that your bias will be the inverted<br />  opponent's bias.<br /><br />CNIrrflug: Pick a random choice.  If you win, use it again; else,<br />  use a random choice.<br /><br />CNStepAhead: Try to think a step ahead.  If you win, use the choice<br />  where you'd have lost.  If you lose, you the choice where you'd<br />  have won.  Use the same on draw.<br /><br />CNBiasFlipper: Always use the choice that hits what the opponent<br />  said most or second-to-most often (if the most often choice is not<br />  absolutely prefered).<br /><br />CNBiasBreaker: Always use the choice that hits what the opponent<br />  said most often.<br /><br />CNMeanPlayer: Pick a random choice.  If you win, use it again; else,<br />  use the opponent's choice.</p>
			<p>I really should show all of those here, but that would make for a ridiculously large summary.  Let's go with Christian's favorite:</p>
			<div class="code"><span class="type">ruby</span><div class="body">    <span class="keyword">class</span> CNBiasInverter &lt; Player<br />      <span class="keyword">def</span> initialize(opponent)<br />        <span class="keyword">super</span><br />        <span class="variable">@biases</span> = {:rock =&gt; 0, :scissors =&gt; 0, :paper =&gt; 0}<br />        <span class="variable">@hit</span> = {:rock =&gt; :paper, :paper =&gt; :scissors, :scissors =&gt; :rock}<br />      <span class="keyword">end</span><br /><br />      <span class="keyword">def</span> choose<br />        n = ::Kernel.rand(<span class="variable">@biases</span>[:rock] + <span class="variable">@biases</span>[:scissors] +<br />            <span class="variable">@biases</span>[:paper]).to_i<br />        <span class="keyword">case</span> n<br />        <span class="keyword">when</span> 0..<span class="variable">@biases</span>[:rock]<br />          :paper<br />        <span class="keyword">when</span> <span class="variable">@biases</span>[:rock]..<span class="variable">@biases</span>[:rock]+<span class="variable">@biases</span>[:scissors]<br />          :rock<br />        <span class="keyword">when</span> <span class="variable">@biases</span>[:rock]+<span class="variable">@biases</span>[:scissors]..<span class="variable">@biases</span>[:rock]+<br />             <span class="variable">@biases</span>[:scissors]+<span class="variable">@biases</span>[:paper]<br />          :scissors<br />        <span class="keyword">else</span><br />          p <span class="variable">@biases</span>[:rock]+<span class="variable">@biases</span>[:scissors]..<span class="variable">@biases</span>[:paper]<br />          abort n.to_s<br />        <span class="keyword">end</span><br />      <span class="keyword">end</span><br /><br />      <span class="keyword">def</span> result( you, them, win_lose_or_draw )<br />        <span class="variable">@biases</span>[them] += 1<br />      <span class="keyword">end</span><br />    <span class="keyword">end</span><br /><br /></div></div>
			<p>initialize() sets up the a Hash for tracking the biases.  (I don't believe @hit is needed.)  result() is the compliment to that.  It adjusts the proper bias count each time the opponent makes a selection.</p>
			<p>choose() does all the interesting work.  A random number is chosen between 0 and the total of all the bias counts.  That number is then associated with the indicated bias by some clever use of ranges and the opposite of that bias is returned as CNBiasInverter's choice.</p>
			<p>In other words, as the opponent chooses more and more of a particular item, the bias count for that item climbs.  This will cause the semi-random choice to drift towards the opposite of that favored move.</p>
			<p>Let's compare with our baseline:</p>
			<p class="example">CNBiasInverter vs. JEGPaperPlayer<br />		CNBiasInverter: 995.0<br />		JEGPaperPlayer: 5.0<br />		CNBiasInverter Wins<br />CNBiasInverter vs. JEGQueuePlayer<br />		CNBiasInverter: 653.5<br />		JEGQueuePlayer: 346.5<br />		CNBiasInverter Wins</p>
			<p>The results are getting better.  But, of course, random is still trump:</p>
			<p class="example">AJBRandomPlayer vs. CNBiasInverter<br />		AJBRandomPlayer: 509.5<br />		CNBiasInverter: 490.5<br />		AJBRandomPlayer Wins</p>
			<p>There were many, many interesting strategies, like the one above.  But random remained the great equalizer.  Which leads us to the critical question:  What exactly is the point of this exercise?</p>
			<p>Cheating, of course!</p>
			<p>With the Prisoner's Dilemma and this quiz, it's common the engineer the environment to be ripe for cheating.  Since there's no winning strategy available, we'll need to bend the rules a little bit.  That's because programmers have enormous egos and can't stand to lose at anything!</p>
			<p>(Note:  Technically, no one even cheated.  The definition of cheat that applies here is, "to violate rules dishonestly."  Go back and reread the quiz, if you need to...)</p>
			<p>What's the ultimate cheat?  Well, here's the first by Bill Atkins:</p>
			<div class="code"><span class="type">ruby</span><div class="body">    <span class="keyword">class</span> BACheater &lt; Player<br />      <span class="keyword">def</span> initialize opponent<br />        Object.const_get(opponent).send :define_method, :choose <span class="keyword">do</span><br />          :paper<br />        <span class="keyword">end</span><br />      <span class="keyword">end</span><br /><br />      <span class="keyword">def</span> choose<br />        :scissors<br />      <span class="keyword">end</span><br />    <span class="keyword">end</span><br /><br /></div></div>
			<p>It doesn't get much simpler than that!  Bill's initialize() method uses the passed in name of the opponent to locate the correct Class object and redefine the choose() method of that Class to something super easy to deal with.  The opponent is modified to always throw :paper and BACheater always throws :scissors.</p>
			<p>That's 100% successful against anything we've seen thus far.  Worse, you're player is permanently modified when it goes up against BACheater, leaving you vulnerable to clever strategies like CNBiasInverter above:</p>
			<p class="example">AJBRandomPlayer vs. BACheater<br />		AJBRandomPlayer: 0<br />		BACheater: 1000<br />		BACheater Wins<br />AJBRandomPlayer vs. CNBiasInverter<br />		AJBRandomPlayer: 4.5<br />		CNBiasInverter: 995.5<br />		CNBiasInverter Wins<br />BACheater vs. CNBiasInverter<br />		BACheater: 1000<br />		CNBiasInverter: 0<br />		BACheater Wins</p>
			<p>Ouch!</p>
			<p>Another cheat used by more than one player was to try and predict an opponent's move, then respond with a counter.  Here is Benedikt Huber's version:</p>
			<div class="code"><span class="type">ruby</span><div class="body">    KILLER = { :rock    =&gt; :paper,<br />               :paper   =&gt; :scissors,<br />               :scissors =&gt; :rock }<br /><br />    <span class="keyword">class</span> BHCheatPlayer &lt; Player<br /><br />      <span class="keyword">def</span> initialize( opponent )<br />        <span class="keyword">super</span><br />        <span class="variable">@opp</span> = Object.const_get(opponent).new(<span class="keyword">self</span>)<br />      <span class="keyword">end</span><br /><br />      <span class="keyword">def</span> choose<br />        KILLER[<span class="variable">@opp</span>.choose]<br />      <span class="keyword">end</span><br /><br />      <span class="keyword">def</span> result(you,them,result)<br />        <span class="variable">@opp</span>.result(them,you,result)<br />      <span class="keyword">end</span><br /><br />    <span class="keyword">end</span><br /><br /></div></div>
			<p>Again initialize() retrieves the Class object, but instead of modifying the Class, it simply creates an internal copy of the opponent.  result() forwards each pick to the copied opponent, to keep it synchronized with the real opponent.  From there, choose() is obvious:  See what the opponent is about to do and counter.</p>
			<p>It was pointed out on Ruby Talk that this doesn't demolish random players; however, against any random strategy, this becomes a random player.  Countering a random choice is a still a random move, even if the choice isn't what the opponent is about to do.</p>
			<p>There were other great cheats.  Jannis Harder's self-repairing program and FGSpyPlayer (well commented) are both worth studying.  Some cheating approaches were also overlooked.  For example, no one tried to modify the score, but it can be done.  There were also a lot of excellent non-cheating solutions.  Which leaves me with no choice but to say the lame but utterly true, "All the submissions are worth a look!"</p>
			<p>My thanks to all my fellow cheaters and the rule abiding players that tolerate our antics.</p>
			<p>Tomorrow's quiz was an actual job project of mine, years ago...</p>
		</div>
		<div id="logo"><img src="/web/20120121190251im_/http://rubyquiz.com/images/ruby_quiz_logo.jpg" alt="" width="157" height="150" /></div>
		<div id="links">
			<span class="title">Quiz Solutions</span>
			<ol>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127770">Christian Neukirchen</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127771">Simon Strandgaard</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127776">Avi Bryant</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127779">Jannis Harder</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127784">Bill Atkins</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127792">Jannis Harder (2)</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127795">James Edward Gray II</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127800">Dennis Ranke</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127815">Jannis Harder (3)</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127817">Florian Gro§</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127825">Benedikt Huber</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127826">Benedikt Huber (2)</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/127844">Lee Marlow</a></li>
				<li><a href="/web/20120121190251/http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/222906">femto gary</a></li>
			</ol>
			<p><a href="/web/20120121190251/http://rubyquiz.com/quiz16_sols.zip">Download Solutions</a></p>
			<p><a href="/web/20120121190251/http://rubyquiz.com/index.html">Back to Quiz Listing</a></p>
		</div>
		<div id="footer">&nbsp;</div>
	</div>
</body>
</html>





<!--
     FILE ARCHIVED ON 19:02:51 Jan 21, 2012 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 13:09:12 Jun 5, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
